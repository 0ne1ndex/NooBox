!function(e){function o(n){if(t[n])return t[n].exports;var a=t[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,o),a.loaded=!0,a.exports}var t={};return o.m=e,o.c=t,o.p="",o(0)}([function(e,o){"use strict";function t(e){chrome.runtime.sendMessage({job:"getDB",key:e})}function n(){Y||(Y=!0,$("body").append('<canvas id="NooBox-VideoBeyond-preCanvas" style="display: none"></canvas>'),L=$("#NooBox-VideoBeyond-preCanvas")[0],U=L.getContext("2d"),I([{event:"play",target:"playPause"},{event:"pause",target:"playPause"},{event:"volumechange",target:"volumeChange"}]),$(document.head).append("<style>@-webkit-keyframes hideAnimation2{0% { opacity:0.618;} 100% {opacity:0;}}@keyframes hideAnimation{0% { opacity:0.618;} 100% {opacity:0;}}.noobox-hide{-webkit-animation:hideAnimation2 ease-in 0.333s forwards;animation:hideAnimation ease-in 0.333s forwards;}#NooBox-Video-Indicator-Icon{margin-top:-25px;height:30px;margin-bottom:-5px}#NooBox-Video-Indicator{pointer-events:none;display:none;height:"+_.height+"px;width:"+_.width+"px;position:absolute;text-align:center;font-size:23px;line-height:"+_.height+"px;opacity:0.618;background-color:rgb(43,54,125);color:white;z-index:99999999999999;margin:0;padding:0;border:0}</style>"),$("body").append('<div id="NooBox-Video-Indicator"></div>'),A=setInterval(V,111),$("body").on("click",function(e){j=B(e),O&&j&&(F(),i(r,j,"playPause","clickPlayPause",111))}),$("body").on("dblclick",function(e){F(),j=B(e)}),document.onkeydown=function(e){if(e=e||window.event,O&&j){var o=e.keyCode;"38"!=o&&"40"!=o&&"37"!=o&&"39"!=o&&"36"!=o&&"35"!=o||chrome.runtime.sendMessage({job:"videoControl_use"}),F(),"38"==e.keyCode?i(v,j,"volumeChange","arrowUpVolumeChange",111):"40"==e.keyCode?i(g,j,"volumeChange","arrowDownVolumeChange",111):"37"==e.keyCode?i(c,j,"timeChange","rewindSmall",111):"39"==e.keyCode?i(h,j,"timeChange","forwardSmall",111):"36"==e.keyCode?p(j,0):"35"==e.keyCode&&p(j,10)}},$(document).on("keypress",function(e){if(O&&j){F(),e.preventDefault();var o=String.fromCharCode(e.which);switch("k"!=o&&" "!=o&&"j"!=o&&"l"!=o&&","!=o&&"."!=o&&"<"!=o&&">"!=o&&"r"!=o&&"m"!=o&&"f"!=o&&"d"!=o&&"b"!=o||chrome.runtime.sendMessage({job:"videoControl_use"}),o){case"k":i(r,j,"playPause","kPlayPause",111);break;case" ":i(r,j,"playPause","spacePlayPause",111);break;case"j":i(u,j,"timeChange","rewindBig",111);break;case"l":i(m,j,"timeChange","forwardBig",111);break;case",":i(s,j,"timeChange","rewindTiny",111);break;case".":i(f,j,"timeChange","forwardTiny",111);break;case"<":i(b,j,"rateChange","slowRateChange",111);break;case">":i(y,j,"rateChange","speedRateChange",111);break;case"r":k(j,90);break;case"m":i(C,j,"volumeChange","muteVolumeChange",111);break;case"f":x(j);break;case"d":w(j);break;case"b":break;default:e.which>=48&&e.which<=57&&p(j,e.which-48)}}}))}function a(e,o){o||(o=""),$("#NooBox-Video-Indicator").removeClass("noobox-hide"),setTimeout(function(){$("#NooBox-Video-Indicator").addClass("noobox-hide")},100),$("#NooBox-Video-Indicator").html('<div id="NooBox-Video-Indicator-Icon">'+o+"</div>"+e)}function i(e,o,t,n,a){F();var r=P(j);if(!r)return I([{event:"play",target:"playPause"},{event:"pause",target:"playPause"},{event:"volumechange",target:"volumeChange"},{event:"timeupdate",target:"timeUpdate"},{event:"ratechange",target:"rateChange"},{}]),void i(e,o,t,n,a);var d="NooBox-Video-Conflict-"+n;$(j).hasClass(d)?(q[r][t]--,setTimeout(function(){q[r][t]<0&&($(j).removeClass(d),e(o))},222)):(e(o),q[r][t]--,setTimeout(function(){q[r][t]>0&&($(j).addClass(d),e(o),q[r][t]--,setTimeout(function(){q[r][t]=0},111))},222))}function r(e){e.paused?(e.play(),a("Play")):(e.pause(),a("Pause"))}function d(e,o){e.currentTime-=o,a(o+"s","&larr;")}function c(e){d(e,M)}function u(e){d(e,2*M)}function s(e){d(e,1/z)}function l(e,o){e.currentTime+=o,a(o+"s","&rarr;")}function h(e){l(e,M)}function m(e){l(e,2*M)}function f(e){l(e,1/z)}function p(e,o){e.currentTime=e.duration*o/10,a(10*o+"%","&commat;")}function v(e){e.volume.toFixed(2)<=1-D&&(e.volume=(e.volume+D).toFixed(2),a(e.volume+"%","&uarr;"))}function g(e){e.volume.toFixed(2)>=D&&(e.volume=(e.volume-D).toFixed(2),a(e.volume+"%","&darr;"))}function y(e){var o=S;e.playbackRate.toFixed(2)<=16-o&&(e.playbackRate=(e.playbackRate+o).toFixed(2),a(e.playbackRate,"&raquo;"))}function b(e){var o=S;e.playbackRate.toFixed(2)>=o+.0625&&(e.playbackRate=(e.playbackRate-o).toFixed(2),a(e.playbackRate,"&laquo;"))}function k(e,o){var t=$(e),n=t.css("transform")||t.css("-webkit-transform"),a=void 0;if("none"!==n){var i=n.split("(")[1].split(")")[0].split(","),r=i[0],d=i[1];a=Math.round(Math.atan2(d,r)*(180/Math.PI))}else a=0;a=(a+o)%360,t.css("transform","rotate("+a+"deg)"),t.css("-webkit-transform","rotate("+a+"deg)")}function C(e){e.muted=!e.muted,a(e.muted?'<span style="font-size:48px;text-decoration:line-through;">&sung;</span>':'<span style="font-size:48px;">&sung;</span>')}function x(e){q.fullscreen--,document.webkitFullscreenElement===e?document.webkitExitFullscreen():e.webkitRequestFullScreen()}function w(e){var o=document.createElement("a");o.href=e.currentSrc,o.download="video",document.body.appendChild(o),o.click(),document.body.removeChild(o)}function B(e){var o=e.target;if($(o).is("video"))return o;o=null;for(var t=$("video"),n=void 0,a=e.pageX,i=e.pageY,r=0;r<t.length;r++)if(n=$(t[r]).offset(),!(a<n.left||i<n.top||a>n.left+$(t[r]).width()||i>n.top+$(t[r]).height())){o=t[r];break}return o}function V(){j?clearInterval(A):(j=$("video")[0],E+1e3<(new Date).getTime()&&clearInterval(A))}function P(e){var o=$(e).attr("class")||"",t=(o.match(/NooBox-Video-(\d+)/)||[null,null])[1];return t}function I(e){for(var o=$("video"),t=0;t<o.length;t++){var n=o[t],a=P(n);if(null==a){q.push({playPause:0,volumeChange:0});var i=q.length-1;$(n).addClass("NooBox-Video-"+i);for(var r=0;r<e.length;r++){var d=e[r];$(n).on(d.event,N.bind(null,i,d.target))}}}}function N(e,o){q[e][o]++}function F(){if(j){var e=$(j).offset();e.left+=($(j).width()-_.width)/2,e.top+=($(j).height()-_.height)/2,$("#NooBox-Video-Indicator").offset(e),$("#NooBox-Video-Indicator").show(),$("#NooBox-Video-Indicator").addClass("noobox-hide")}}function R(e,o){chrome.storage.sync.get(e,function(t){o&&o(t[e])})}function T(e,o,t,n){R(e,function(e){"1"==e||1==e?o&&o(n):t&&t(n)})}var j=null,M=5,D=.05,S=.05,z=30,A=null,E=(new Date).getTime(),_={width:100,height:100},q=[],L=void 0,U=void 0,O=!1,X="",Y=!1;chrome.runtime.onMessage.addListener(function(e,o,t){"job"in e&&("videoConrolContentScriptSwitch"==e.job?(O=e.enabled,0!=O&&(O=!0,n())):"returnDB"==e.job&&e.key==X&&(O=e.data,0!=O&&(O=!0,n())))}),document.addEventListener("DOMContentLoaded",function(){T("videoControl",function(){var e=window.location.hostname;X="videoControl_website_"+e,t(X)})})}]);