!function(e){function t(i){if(o[i])return o[i].exports;var a=o[i]={exports:{},id:i,loaded:!1};return e[i].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t){"use strict";function o(e,t){chrome.storage.sync.get(e,function(o){t&&t(o[e])})}function i(e,t,i,a){o(e,function(e){"1"==e?t&&t(a):i&&i(a)})}function a(){var e=$("#linkImage").prop("checked"),t=!1,o=$("#NooBox-extractImages-selector-range").val(),i=$("#NooBox-extractImages-gallery")[0];$(i).empty(),r={};for(var a=x,s=1;s<o;s++)a=$(a).parent()[0];var g=function(o){$(o).find("*").each(function(){if("IMG"==this.tagName)r[this.src]=!0;else{var o=$(this).css("background-image");if(o){var i=o.replace(/^url\(["']?/,"").replace(/["']?\)$/,"");"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNTIuNTE5IDUyLjUxOSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTIuNTE5IDUyLjUxOTsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxwYXRoIHN0eWxlPSJmaWxsOiMyNkI5OUE7IiBkPSJNMTYuMDQ5LDMxLjEzN0g0LjAwMWwyMC4wOCwxOS45NzFsMjAuMDgtMTkuOTcxSDMyLjExM2MwLDAtNC4yOTItMTcuNzM1LDE2LjA2NC0yOS44NDljMCwwLTE1LjUzNi0zLjAyLTI2Ljc5NCwxMC41MUMyMS4zODIsMTEuNzk3LDE1LjY1MSwxNy45MjcsMTYuMDQ5LDMxLjEzN3oiLz48cGF0aCBzdHlsZT0iZmlsbDojMjZCOTlBOyIgZD0iTTI0LjA4MSw1Mi41MTlMMS41NzcsMzAuMTM3SDE1LjAzYy0wLjA5Mi0xMi43NTksNS4zODMtMTguNzY3LDUuNjIyLTE5LjAyMkMyOC42OTEsMS40NSwzOC45MzMsMCw0NC4zMTgsMGMyLjQ0NiwwLDMuOTg1LDAuMjk0LDQuMDQ5LDAuMzA3bDIuNTc0LDAuNWwtMi4yNTMsMS4zNDFDMzEuMzcxLDEyLjQ1MywzMi4zOTQsMjYuNjYzLDMyLjk0LDMwLjEzN2gxMy42NDVMMjQuMDgxLDUyLjUxOXogTTYuNDI1LDMyLjEzN2wxNy42NTYsMTcuNTYybDE3LjY1Ni0xNy41NjJIMzEuMzI2bC0wLjE4NS0wLjc2NWMtMC4wNDMtMC4xNzctMy44ODEtMTcuMDgyLDE0LjA0MS0yOS4zNThjLTQuNzg0LTAuMTUtMTUuMDIsMC43OTUtMjMuMDMxLDEwLjQyM2MtMC4wOTEsMC4xLTUuNDgxLDYuMDg5LTUuMTAzLDE4LjY3bDAuMDMsMS4wM0g2LjQyNXoiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+"==i||"none"==i||i.match(/^gradient/)||i.match(/^linear-gradient/)||(r[i]=!0)}}e&&"A"==this.tagName&&(1==M[this.href]?r[this.href]=!0:1==!c[this.href]&&n(this.href)),"IFRAME"==this.tagName&&(t||(t=!0))})};g(a),Object.keys(r).forEach(function(e){$(i).append('<img src="'+e+'" style="margin:0px;border:0px;padding:0px;max-width:100%;" />')})}function n(e){if(e&&e.length>0&&1==!c[e]){var t=$('<img src="'+e+'">');$(t).on("error",function(){c[e]=!0}),$(t).on("load",function(){if(1==!r[e]){var t=$("#NooBox-extractImages-gallery")[0];r[e]=!0,M[e]=!0,$(t).append('<img src="'+e+'" style="margin:0px;border:0px;padding:0px;max-width:100%;" />')}})}}var r={},c={},M={},x=null;window.oncontextmenu=function(e){x=e.target};var s=function(){i("extractImages",function(){chrome.runtime.onMessage.addListener(function(e,t,o){if(e.job)if("extractImages"==e.job){$(document.head).append('<style>#NooBox-extractImages,#NooBox-extractImages *{margin:0;padding:0;border-radius:0;background:none}input[type="checkbox"] ~ .inputLabel{cursor:pointer;position:absolute;margin-top: -18px !important;margin-left: 19px !important;width: 174px;height: 28px;border: 4px solid transparent;border-bottom: 4px solid #5667bb;-webkit-transform: rotate(4deg);transform: rotate(4deg);}input[type="checkbox"]:checked ~ .inputLabel{margin-top:-12px;margin-left:163px;width: 18px;height: 38px;border: 4px solid transparent;border-right: 4px solid #5667bb;border-bottom: 4px solid #5667bb;-webkit-transform: rotate(40deg);transform: rotate(40deg);}input[type="range"]::-webkit-slider-thumb{-webkit-appearance:none!important;background-color:#E9E9E9;border:1pxsolid#CECECE;height:15px;width:15px;}#NooBox-extractImages-download{width:20px;height:20px;float: left;cursor:pointer;background-size: 20px 20px;background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNTIuNTE5IDUyLjUxOSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTIuNTE5IDUyLjUxOTsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxwYXRoIHN0eWxlPSJmaWxsOiMyNkI5OUE7IiBkPSJNMTYuMDQ5LDMxLjEzN0g0LjAwMWwyMC4wOCwxOS45NzFsMjAuMDgtMTkuOTcxSDMyLjExM2MwLDAtNC4yOTItMTcuNzM1LDE2LjA2NC0yOS44NDljMCwwLTE1LjUzNi0zLjAyLTI2Ljc5NCwxMC41MUMyMS4zODIsMTEuNzk3LDE1LjY1MSwxNy45MjcsMTYuMDQ5LDMxLjEzN3oiLz48cGF0aCBzdHlsZT0iZmlsbDojMjZCOTlBOyIgZD0iTTI0LjA4MSw1Mi41MTlMMS41NzcsMzAuMTM3SDE1LjAzYy0wLjA5Mi0xMi43NTksNS4zODMtMTguNzY3LDUuNjIyLTE5LjAyMkMyOC42OTEsMS40NSwzOC45MzMsMCw0NC4zMTgsMGMyLjQ0NiwwLDMuOTg1LDAuMjk0LDQuMDQ5LDAuMzA3bDIuNTc0LDAuNWwtMi4yNTMsMS4zNDFDMzEuMzcxLDEyLjQ1MywzMi4zOTQsMjYuNjYzLDMyLjk0LDMwLjEzN2gxMy42NDVMMjQuMDgxLDUyLjUxOXogTTYuNDI1LDMyLjEzN2wxNy42NTYsMTcuNTYybDE3LjY1Ni0xNy41NjJIMzEuMzI2bC0wLjE4NS0wLjc2NWMtMC4wNDMtMC4xNzctMy44ODEtMTcuMDgyLDE0LjA0MS0yOS4zNThjLTQuNzg0LTAuMTUtMTUuMDIsMC43OTUtMjMuMDMxLDEwLjQyM2MtMC4wOTEsMC4xLTUuNDgxLDYuMDg5LTUuMTAzLDE4LjY3bDAuMDMsMS4wM0g2LjQyNXoiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);}#NooBox-extractImages-downloadRemaining{color:white;float:left}</style>'),x&&"HTML"!=x.tagName||(x=document.body),o({success:!0}),chrome.runtime.sendMessage({job:"analytics",category:"extractImage",action:"run"},function(e){});for(var i=window.innerHeight-66,n=(window.innerWidth,$('<div id="NooBox-extractImages">').css({"z-index":"999999999999999999999",height:.9*i+"px",overflow:"auto","background-color":"rgba(0,0,0,0.7)",padding:"33px",position:"fixed","margin-left":"20%",width:"60%",top:.05*i+"px"})),c=1,M=x;"BODY"!=M.tagName;)M=$(M).parent()[0],c++;n.append('<div><span id="NooBox-extractImages-selector-left" style="user-select: none;line-height:16px;margin:0px;cursor:pointer;border:0px;padding:0px;z-index:999999999999999999999;margin-top:0px;display:block;float:left;color:white;font-size:33px"><</span><input type="range" id="NooBox-extractImages-selector-range" style="-webkit-appearance: none;background-color:rgb(86, 103, 187);margin:0px;margin-left:13px;border:0px;padding:0px;display:block;float:left;pointer-events: none;height:8px;margin-top:4px;width:200px" value="1" min="1" max="'+c+'" step="1"><span id="NooBox-extractImages-selector-right" style="user-select: none;line-height:16px;margin:0px;margin-left:13px;cursor:pointer;border:0px;padding:0px;margin-top:0px;display:block;float:left;color:white;font-size:60px">></span><div style="position:relative;overflow:visible;height:18px;width:200px;float:left"><input type="checkbox" style="display:none" id="linkImage"><label class="inputLabel" id="linkImageLabel" for="linkImage" ></label><a style="color: white;margin-left: 30px;text-decoration: underline;font-size:15px">example.com/a.jpg</a></div><div id="NooBox-extractImages-download"></div><div id="NooBox-extractImages-downloadRemaining"></div></div>'),n.append('<div id="NooBox-extractImages-switch" style="margin: 0px;border: 0px;padding: 0px;color: white;font-size: 62px;position: fixed;right:20%;top:'+.05*i+'px;width: 64px;height: 64px;background-color: rgb(86, 103, 187);text-align: center;line-height: 64px;cursor: pointer;">X</>'),n.append('<div style="margin:0px;border:0px;padding:0px;clear:both"></div>'),"BODY"!=x.tagName&&"HTML"!=x.tagName&&(x=$(x).parent()[0]);var s=$('<div id="NooBox-extractImages-gallery" style="margin:0px;border:0px;padding:0px;width:80%;margin-top:32px"></div>');n.append(s),$(document.body).append(n),a(),$("body").on("keyup","#NooBox-extractImages",function(e){console.log(e.keyCode),27===e.keyCode&&$(e.target).remove()}),$("#NooBox-extractImages-selector-left").on("click",function(e){var t=parseInt($("#NooBox-extractImages-selector-range").val());t--,$("#NooBox-extractImages-selector-range").val(t),a()}),$("#NooBox-extractImages-selector-right").on("click",function(e){var t=parseInt($("#NooBox-extractImages-selector-range").val());t++,$("#NooBox-extractImages-selector-range").val(t),a()}),$("#NooBox-extractImages-selector-range").on("change",function(e){a()}),$("#NooBox-extractImages-switch").on("click",function(e){$(e.target).parent().remove()}),$("#NooBox-extractImages-download").on("click",function(e){var t=[];Object.keys(r).forEach(function(e,o){var i=o;t.push({name:i,url:e})}),chrome.runtime.sendMessage({job:"urlDownloadZip",files:t},function(e){})}),$("#linkImageLabel").on("click",function(e){a()})}else"downloadRemaining"==e.job&&$("#NooBox-extractImages-downloadRemaining").text(e.total-e.remains+"/"+e.total)})})};s()}]);